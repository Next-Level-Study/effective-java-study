# Item 21. μΈν„°νμ΄μ¤λ” κµ¬ν„ν•λ” μ½μ„ μƒκ°ν•΄ μ„¤κ³„ν•λΌ.
μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•λ©΄ κµ¬ν„μ²΄μ— κ·Έ λ©”μ„λ“κ°€ μ΅΄μ¬ν•  κ°€λ¥μ„±μ€ μ•„μ£Ό λ‚®κΈ° λ•λ¬Έμ—, κΈ°μ΅΄ κµ¬ν„μ²΄λ¥Ό κΉ¨λ“λ¦¬μ§€ μ•κ³  μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•  λ°©λ²•μ€ μ—†μ—λ‹¤.</br>
Java8λ¶€ν„°λ” μΈν„°νμ΄μ¤μ— λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ¶”κ°€ν•  μ μλ‹¤.
```java
interface Test {
    void say();

    default void saySomething() {
        // μ΄ λ©”μ„λ“λ¥Ό κµ¬ν„ν•μ§€ μ•λ” ν΄λμ¤μ—μ„λ”, μ—¬κΈ°μ„ κµ¬ν„λ λ‚΄μ©μ΄ μ‚¬μ©λλ‹¤.
    }
}
```

> κΈ°μ΅΄ μΈν„°νμ΄μ¤μ— λ””ν΄νΈ λ©”μ„λ“λ΅ μƒ λ©”μ„λ“λ¥Ό μ¶”κ°€ν•λ” μΌμ€ κΌ­ ν•„μ”ν• κ²½μ°κ°€ μ•„λ‹λΌλ©΄ ν”Όν•΄μ•Ό ν•λ‹¤. </br> ν•μ§€λ§, μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό λ§λ“λ” κ²½μ°λΌλ©΄ ν‘μ¤€μ μΈ λ©”μ„λ“ κµ¬ν„μ„ μ κ³µν•λ” λ° μ μ©ν• μλ‹¨μ΄ λλ‹¤.

μ™ ν”Όν•΄μ•Ό ν•λ”κ°€? </br>
μλ°” 8λ¶€ν„° Collection μΈν„°νμ΄μ¤μ— μ¶”κ°€λ λ””ν΄νΈ λ©”μ„λ“μΈ removeIfλ¥Ό λ³΄μ.

```java
public interface Collection<E> extends Iterable<E> {
    default boolean removeIf(Predicate<? super E> filter) {
        Objects.requireNonNull(filter);
        boolean removed = false;
        final Iterator<E> each = iterator();
        while (each.hasNext()) {
            if (filter.test(each.next())) {
                each.remove();
                removed = true;
            }
        }
        return removed;
    }
}
```
μ„ λ©”μ†λ“κ°€ μ¶”κ°€λ μ΄ν›„, Collectionμ„ κµ¬ν„ν•λ” μ•„νμΉ μ»¤λ¨Όμ¦μ SynchronizedCollectionμ€, removeIfλ¥Ό κµ¬ν„ν•μ§€ μ•μ•„μ„ Collection μΈν„°νμ΄μ¤μ removeIf κµ¬ν„μ„ λ¬Όλ ¤λ°›κ² λμ—λ‹¤.

```java
public class SynchronizedCollection<E> extends Object implements Collection<E>, Serializable {

}
```

λ™κΈ°ν™”λ¥Ό μ κ³µν•λ” SynchronizedCollectionμ΄μ–΄μ•Ό ν•μ§€λ§, removeIfλ¥Ό κµ¬ν„ν•μ§€ μ•κ² λμ–΄, </br>λ©€ν‹° μ¤λ λ“ ν™κ²½μ—μ„λ” removeIfλ¥Ό νΈμ¶ν•λ©΄ ConcurrentModificationExceptionμ΄ λ°μƒν•λ” μκΈ°μΉ λ»ν• κ²°κ³Όλ΅ μ΄μ–΄μ΅λ‹¤.

* λ””ν΄νΈ λ©”μ„λ“λ” κΈ°μ΅΄ κµ¬ν„μ²΄μ— λ°νƒ€μ„ μ¤λ¥λ¥Ό μΌμΌν‚¬ μ μλ‹¤.
* μΈν„°νμ΄μ¤λ¥Ό μ„¤κ³„ν•  λ•λ” μ£Όμλ¥Ό κΈ°μΈμ—¬μ•Ό ν•λ‹¤.

> π¤” μΈν„°νμ΄μ¤λ¥Ό μ €λ§λ‹¤μ λ©μ μΌλ΅ κµ¬ν„ν•λ” κµ¬ν„μ²΄λ“¤μ΄ μμ„ν…λ°, κµ¬ν„μ²΄μ λ©μ μ„ λ²—μ–΄λ‚λ” μƒν™© νΉμ€ μ¤λ™μ‘μ„ λ§‰κΈ° μ„ν•΄μ„λ” μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” μ½μ—μ„ μƒκ°ν•κ³  μ‹ μ¤‘ν•κ² μ„¤κ³„ν•΄μ•Όν•λ” κ²ƒ κ°™μµλ‹λ‹¤. 

# Item 22. μΈν„°νμ΄μ¤λ¥Ό νƒ€μ…μ„ μ •μν•λ” μ©λ„λ΅λ§ μ‚¬μ©ν•λΌ.
> μΈν„°νμ΄μ¤λ” νƒ€μ…μ„ μ •μν•λ” μ©λ„λ΅λ§ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤. μƒμ κ³µκ°μ© μλ‹¨μΌλ΅ μ‚¬μ©ν•μ§€ λ§μ.

### μΈν„°νμ΄μ¤λ΅ λ¬΄μ—‡μ„ ν•  μ μλ”κ°€.
* μμ‹ μ„ κµ¬ν„ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό μ°Έμ΅°ν•  μ μλ” <strong>νƒ€μ… μ—­ν• </strong>μ„ ν•  μ μλ‹¤.
* μΈν„°νμ΄μ¤μ μΈμ¤ν„΄μ¤κ°€ <strong>λ¬΄μ—‡μ„ ν•  μ μλ”μ§€</strong>λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² μ•λ¦΄ μ μλ‹¤.

### μΈν„°νμ΄μ¤λ΅ λ¬΄μ—‡μ„ ν•λ©΄ μ•λλ”κ°€.
* μƒμ μΈν„°νμ΄μ¤

#### μ™?
1. ν΄λμ¤ λ‚΄λ¶€μ—μ„ μ‚¬μ©ν•λ” μƒμλ” λ‚΄λ¶€ κµ¬ν„μ΄ λμ–΄μ•Ό ν•λ‹¤. κ·Έλ¬λ―€λ΅ μƒμ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ€, λ‚΄λ¶€ κµ¬ν„μ„ ν΄λμ¤μ APIλ΅ λ…Έμ¶ν•λ” ν–‰μ„λ‹¤.
2. μ‹¬ν•κ²λ” ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ λ‚΄λ¶€ κµ¬ν„μ— ν•΄λ‹Ήν•λ” μƒμλ“¤μ— μΆ…μ†λκ² ν•λ‹¤.
3. finalμ΄ μ•„λ‹ ν΄λμ¤κ°€ μƒμ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ‹¤λ©΄ λ¨λ“  ν•μ„ ν΄λμ¤μ μ΄λ¦„κ³µκ°„μ΄ κ·Έ μΈν„°νμ΄μ¤κ°€ μ •μν• μƒμλ“¤λ΅ μ¤μ—Όλμ–΄ λ²„λ¦°λ‹¤.

> 2λ²μ— λ€ν•΄μ„λ”, μƒμ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν΄λμ¤κ°€ μλ‹¤λ©΄ κ·Έ μΈμ¤ν„΄μ¤λ¥Ό ν†µν•΄ μΈν„°νμ΄μ¤μ μƒμλ¥Ό μ™Έλ¶€ μ½”λ“μ—μ„ μ‚¬μ©ν•  μ μμ–΄μ„ κ·Έλ° κ²ƒ κ°™μ.
```java
public interface MathConstants {
    double PI = 3.141592;
}

public class Calculator implements MathConstants{}

public class Main {
    public static void main(String[] args){
        Calculator calculator = new Calculator();
        double pi = calculator.PI;
    }
}
```

### μƒμλ¥Ό κ³µκ°ν•λ‹¤λ©΄, λ” λ‚μ€ λ°©λ²•λ“¤
* ν΄λμ¤λ‚ μΈν„°νμ΄μ¤ μμ²΄μ— μ¶”κ°€ν•΄λΌ. ex)Integerλ‚ Doubleμ MIN_VALUE, MAX_VALUE
```java
public final class Integer extends Number implements Comparable<Integer> {
    @Native public static final int   MIN_VALUE = 0x80000000;

    @Native public static final int   MAX_VALUE = 0x7fffffff;
}
```
* μ—΄κ±° νƒ€μ…μΌλ΅ λ‚νƒ€λ‚΄κΈ° μ ν•©ν• μƒμλΌλ©΄ μ—΄κ±° νƒ€μ…μΌλ΅ κ³µκ°ν•΄λΌ.
* μΈμ¤ν„΄μ¤ν™” ν•  μ μ—†λ” μ ν‹Έλ¦¬ν‹° ν΄λμ¤μ— λ‹΄μ•„ κ³µκ°ν•΄λΌ.

# Item 23. νƒκ·Έ λ‹¬λ¦° ν΄λμ¤λ³΄λ‹¤λ” ν΄λμ¤ κ³„μΈµκµ¬μ΅°λ¥Ό ν™μ©ν•λΌ.
#### νƒκ·Έ λ‹¬λ¦° ν΄λμ¤?
```java
class Figure {
    enum Shape { RECTANGLE, CIRCLE };

    // νƒκ·Έ ν•„λ“
    final Shape shape;

    // μ‚¬κ°ν•/μ›μ© μƒμ„±μ
    
    double area() {
        switch(shape) {
            case RECTANGEL:
                // ...
            case CIRCLE:
                // ...
            default:
                // ...
        }
    }
}
```

### νƒκ·Έ λ‹¬λ¦° ν΄λμ¤λ” λ‹¨μ μ΄ ν•κ°€λ“
1. μ—΄κ±° νƒ€μ… μ„ μ–Έ, νƒκ·Έ ν•„λ“, switch λ¬Έ λ“± μ“Έλ°μ—†λ” μ½”λ“κ°€ λ§λ‹¤.
2. κ°€λ…μ„± λ‚μλ‹¤
3. ν•„λ“λ¥Ό finalλ΅ μ„ μ–Έν•λ ¤κ³  ν•λ©΄, νΉμ • νƒκ·Έμ—μ„ μ‚¬μ©ν•μ§€ μ•λ” ν•„λ“κΉμ§€ μ΄κΈ°ν™”ν•΄μ•Όν•λ‹¤.
4. <strong>μΈμ¤ν„΄μ¤ νƒ€μ…λ§μΌλ΅λ” μλ―Έλ¥Ό μ• μ μ—†λ‹¤.</strong>

> μλ°”κ°™μ€ κ°μ²΄ μ§€ν–¥ μ–Έμ–΄λ”, νƒ€μ… ν•λ‚λ΅ λ‹¤μ–‘ν• μλ―Έμ κ°μ²΄λ¥Ό ν΄λμ¤ κ³„μΈµ κµ¬μ΅°λ΅ ν‘ν„ν•λ” λ°©λ²•μΈ μ„λΈνƒ€μ΄ν•‘ λ°©λ²•μ΄ μλ‹¤.

```java
// 1. κ³„μΈµκµ¬μ΅°μ λ£¨νΈκ°€ λ  μ¶”μƒ ν΄λμ¤λ¥Ό μ •μν•λ‹¤.
abstract class Figure {
    //2. νƒκ·Έ κ°’μ— λ”°λΌ λ™μ‘μ΄ λ‹¬λΌμ§€λ” λ©”μ„λ“λ” λ£¨νΈ ν΄λμ¤μ μ¶”μƒ λ©”μ„λ“λ΅ μ„ μ–Έν•λ‹¤. 
    abstract double area();

    // λ™μ‘μ΄ μΌμ •ν• λ©”μ„λ“λ” λ£¨νΈ ν΄λμ¤μ μΌλ° λ©”μ„λ“λ΅ μ¶”κ°€ν•λ‹¤.
}

class Circle extends Figure {
    // ν΄λμ¤μ μλ―Έμ— ν•΄λ‹Ήν•λ” final λ°μ΄ν„° ν•„λ“λ§ κ°–κ²λλ‹¤.
    final double radius;

    // constructor

    // μλ―Έμ— λ§κ² λ©”μ„λ“λ¥Ό κµ¬ν„ν•λ©΄λλ‹¤.
    @Override
    double area() {
        return Math.PI * (radius * radius);
    }
}
```

* νƒ€μ… μ‚¬μ΄μ μμ—°μ¤λ¬μ΄ κ³„μΈµ κ΄€κ³„λ¥Ό λ°μν•  μ μμ–΄, μ μ—°μ„±μ΄ μΆ‹κ³  μ»΄νμΌνƒ€μ„ νƒ€μ… κ²€μ‚¬ λ¥λ ¥μ„ λ†’μ—¬μ¤€λ‹¤λ” μ¥μ μ΄ μλ‹¤.

# Item 24. λ©¤λ²„ ν΄λμ¤λ” λλ„λ΅ staticμΌλ΅ λ§λ“¤λΌ.
#### μ¤‘μ²© ν΄λμ¤(nested class)
λ‹¤λ¥Έ ν΄λμ¤ μ•μ— μ •μλ ν΄λμ¤μ΄λ©°, μμ‹ μ„ κ°μ‹Ό λ°”κΉ¥ ν΄λμ¤μ—μ„λ§ μ“°μ—¬μ•Ό ν•λ‹¤.
`μ •μ  λ©¤λ²„ ν΄λμ¤`, `(λΉ„μ •μ )λ©¤λ²„ ν΄λμ¤`, `μµλ… ν΄λμ¤`, `μ§€μ—­ ν΄λμ¤`μ μΆ…λ¥κ°€ μλ‹¤.
μ²«λ²μ§Έλ¥Ό μ μ™Έν• λ‚λ¨Έμ§€λ” λ‚΄λ¶€ ν΄λμ¤(inner class)μ— ν•΄λ‹Ήν•λ‹¤.

#### 1. μ •μ  λ©¤λ²„ ν΄λμ¤
λ‹¤λ¥Έ ν΄λμ¤ μ•μ— μ„ μ–Έλκ³ , λ°”κΉ¥ ν΄λμ¤μ private λ©¤λ²„μ— μ ‘κ·Όν•  μ μλ‹¤λ” μ  μ μ™Έν•κ³ λ” μΌλ° ν΄λμ¤μ™€ κ°™λ‹¤.</br>
λ‹¤λ¥Έ μ •μ  λ©¤λ²„μ™€ λ‘κ°™μ€ κ·μΉ™μ„ μ μ©λ°›λ”λ‹¤.
```java
public class Calculator {

    public static class Embedded {
        public static void doSomething() {
            System.out.println("embedded");
        }
    }
}

public class Main {
    public static void main(String[] args){
        Calculator.Embedded.doSomething();
    }
}
```

#### 2. λΉ„μ •μ  λ©¤λ²„ ν΄λμ¤
λΉ„μ •μ  λ©¤λ²„ ν΄λμ¤μ μΈμ¤ν„΄μ¤λ” λ°”κΉ¥ ν΄λμ¤μ μΈμ¤ν„΄μ¤μ™€ μ•”λ¬µμ μΌλ΅ μ—°κ²°λμ–΄, μ •κ·ν™”λ thisλ¥Ό μ‚¬μ©ν•΄ λ°”κΉ¥ μΈμ¤ν„΄μ¤μ λ©”μ„λ“λ¥Ό νΈμ¶ν•κ±°λ‚ λ°”κΉ¥ μΈμ¤ν„΄μ¤μ μ°Έμ΅°λ¥Ό κ°€μ Έμ¬ μ μλ‹¤.</br>
λΉ„μ •μ  λ©¤λ²„ ν΄λμ¤λ” λ°”κΉ¥ μΈμ¤ν„΄μ¤ μ—†μ΄λ” μƒμ„±ν•  μ μ—†λ‹¤.
```java
public class Calculator {

    private final int number;
    private final Embedded embedded = new Embedded();

    // constructor

    public void doSomething() {
        embedded.doSomething();
    }

    private class Embedded {
        public void doSomething() {
            // μ •κ·ν™”λ thisλ¥Ό μ‚¬μ©ν•΄μ„ λ°”κΉ¥ μΈμ¤ν„΄μ¤μ λ©”μ„λ“λ¥Ό νΈμ¶ν•  μ μλ‹¤.
            System.out.println(Calculator.this.number);
        }
    }
}
```
* (?) κ΄€κ³„ μ •λ³΄κ°€ λΉ„μ •μ  λ©¤λ²„ ν΄λμ¤μ μΈμ¤ν„΄μ¤ μ•μ— λ§λ“¤μ–΄μ Έ λ©”λ¨λ¦¬ κ³µκ°„μ„ μ°¨μ§€ν•λ©°, μƒμ„± μ‹κ°„λ„ λ” κ±Έλ¦°λ‹¤.
* μ–΄λ‹µν„°λ¥Ό μ •μν•  λ• μμ£Ό μ“°μΈλ‹¤.

> λ©¤λ²„ ν΄λμ¤μ—μ„ λ°”κΉ¥ μΈμ¤ν„΄μ¤μ— μ ‘κ·Όν•  μΌμ΄ μ—†λ‹¤λ©΄, λ¬΄μ΅°κ±΄ static μ„ λ¶™μ—¬ μ •μ  λ©¤λ²„ ν΄λμ¤λ΅ λ§λ“¤μ.

* staticμ„ μƒλµν•λ©΄ λ°”κΉ¥ μΈμ¤ν„΄μ¤λ΅μ μ¨μ€ μ™Έλ¶€ μ°Έμ΅°λ¥Ό κ°–κ² λκ³ , μ΄ μ°Έμ΅°λ¥Ό μ €μ¥ν•λ ¤λ©΄ μ‹κ°„κ³Ό κ³µκ°„μ΄ μ†λΉ„λλ‹¤. μ‹¬κ°ν• λ¬Έμ λ”, GCκ°€ λ°”κΉ¥ ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό μκ±°ν•μ§€ λ»ν•λ” λ©”λ¨λ¦¬ λ„μκ°€ μƒκΈΈ μ μλ‹¤.
> Map κµ¬ν„μ²΄λ” μ—”νΈλ¦¬ κ°μ²΄λ“¤μ„ κ°€μ§€κ³  μμ. μ—”νΈλ¦¬λ¥Ό λΉ„μ •μ  λ©¤λ²„ ν΄λμ¤λ΅ ν‘ν„ν•λ” κ²ƒμ€ λ™μ‘μ€ ν•κ² μ§€λ§ λ¨λ“  μ—”νΈλ¦¬κ°€ λ°”κΉ¥ λ§µμΌλ΅μ μ°Έμ΅°λ¥Ό κ°–κ² λμ–΄ κ³µκ°„κ³Ό μ‹κ°„μ„ λ‚­λΉ„ν•  κ²ƒμ΄λ‹¤.

#### 3. μµλ… ν΄λμ¤
* λ°”κΉ¥ ν΄λμ¤μ λ©¤λ²„κ°€ μ•„λ‹λ‹¤. μ“°μ΄λ” μ‹μ μ— μ„ μ–Έκ³Ό λ™μ‹μ— μΈμ¤ν„΄μ¤κ°€ λ§λ“¤μ–΄μ§„λ‹¤.
* μ„ μ–Έν• μ§€μ μ—μ„λ§ μΈμ¤ν„΄μ¤λ¥Ό λ§λ“¤ μ μκ³ , instanceof κ²€μ‚¬λ‚ ν΄λμ¤μ μ΄λ¦„μ΄ ν•„μ”ν• μ‘μ—…μ€ μν–‰ν•  μ μ—†λ‹¤.
```java
// λ¶€λ¨ ν΄λμ¤
class Animal {
    public String bark() {
        return "λ™λ¬Όμ΄ μ›λ‹λ‹¤";
    }
}

public class Main {
    public static void main(String[] args) {
        // μµλ… ν΄λμ¤ : ν΄λμ¤ μ •μμ™€ κ°μ²΄ν™”λ¥Ό λ™μ‹μ—. μΌνμ„±μΌλ΅ μ‚¬μ©
        Animal dog = new Animal() {
        	@Override
            public String bark() {
                return "κ°κ°€ μ§–μµλ‹λ‹¤";
            }
        };
        	
        // μµλ… ν΄λμ¤ κ°μ²΄ μ‚¬μ©
        dog.bark();
    }
}
// μƒλ΅ μ •μν• λ©”μ†λ“λ” μ™Έλ¶€μ—μ„ μ‚¬μ©ν•  μ μ—†λ‹¤.
μ¶μ²: https://inpa.tistory.com/entry/JAVA-β•-μµλ…-ν΄λμ¤Anonymous-Class-μ‚¬μ©λ²•-λ§μ¤ν„°ν•κΈ° [Inpa Dev π‘¨β€π’»:ν‹°μ¤ν† λ¦¬]
```

#### 4. μ§€μ—­ ν΄λμ¤
* μ΄λ¦„μ΄ μκ³ , λ°λ³µν•΄μ„ μ‚¬μ©ν•  μ μλ‹¤.
* λΉ„μ •μ  λ¬Έλ§¥μ—μ„ μ‚¬μ©λ  λ•λ§ λ°”κΉ¥ μΈμ¤ν„΄μ¤λ¥Ό μ°Έμ΅°ν•  μ μκ³ , μ •μ  λ©¤λ²„λ” κ°€μ§ μ μ—†μΌλ©° κ°€λ…μ„±μ„ μ„ν•΄ μ§§κ² μ‘μ„±ν•΄μ•Ό ν•λ‹¤.
```java
public class Calculator {

    class Embedded {}
}
```

# Item 25. ν†±λ λ²¨ ν΄λμ¤λ” ν• νμΌμ— ν•λ‚λ§ λ‹΄μΌλΌ.
ν• νμΌμ— ν†± ν΄λμ¤ νμΌμ΄ μ—¬λ¬κ°λΌλ©΄, μ»΄νμΌλ¬μ— μ–΄λ μ†μ¤ νμΌμ„ λ¨Όμ € κ±΄λ„¤λλƒμ— λ”°λΌ λ™μ‘μ΄ λ‹¬λΌμ§„λ‹¤.

1. ν†±λ λ²¨ ν΄λμ¤λ“¤μ„ μ„λ΅ λ‹¤λ¥Έ μ†μ¤ νμΌλ΅ λ¶„λ¦¬ν•΄λΌ.
2. κ·Έκ² μ•„λ‹λ©΄, μ •μ  λ©¤λ²„ ν΄λμ¤λ¥Ό μ‚¬μ©ν•΄λΌ.

